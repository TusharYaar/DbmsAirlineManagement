use flightdatabase;

Create table userinfo(
userid varchar(5) primary key unique, 
pass varchar(40) not null,
first_name varchar(20) not null,
last_name varchar(20) not null,
email varchar(40) not null,
phone bigint(10) not null,
passport_number varchar(10) not null,
dob date not null, 
usertype varchar(5),
occupation varchar(12) not null,
constraint CK_TYPE1 check(usertype IN('user','admin','crew')),
constraint Email_Check check (email like ('%@%.%'))
);



create table airport (
airport_id varchar(5) primary key unique ,
airport_name varchar(35),
airport_city varchar(35),
airport_state varchar(35))

CREATE TABLE flight(
flight_number varchar(5) PRIMARY KEY unique,
departure varchar(7),
departure_date date,
departure_time TIME,
destination varchar(7),
arrival_date date,
arrival_time TIME,
price int(7),
constraint fk_departure foreign key(departure) references airport(airport_id),
constraint fk_destination foreign key(destination) references airport(airport_id)
);



select flight_number,departure_date,departure_time,arrival_date,arrival_time,
ap_des.airport_name as des_name, ap_des.airport_state as des_state, ap_des.airport_city as des_city, ap_des.airport_short as des_short,
ap_dep.airport_name as dep_name, ap_dep.airport_state as dep_state, ap_dep.airport_city as dep_city, ap_dep.airport_short as dep_short 
from flight 
join airport as ap_des on flight.departure = ap_des.airport_id 
join airport as ap_dep on flight.destination = ap_dep.airport_id
;